{"version":3,"file":"tce-scorm.umd.min.js","sources":["../src/tce-core/upload.js","../src/tce-core/loader.js","../src/index.js"],"sourcesContent":["import loader from './loader';\n\nexport default {\n  inject: ['$storageService'],\n  data: () => ({ uploading: false }),\n  methods: {\n    createFileForm(e) {\n      this.form = new FormData();\n      const [file] = e.target.files;\n      if (!file) return;\n      this.form.append('file', file, file.name);\n      const { unpack } = this.uploadOptions || {};\n      if (unpack) this.form.append('unpack', true);\n    },\n    upload: loader(function (e) {\n      this.createFileForm(e);\n      return this.$storageService.upload(this.form)\n        .then(data => {\n          const { name } = this.form.get('file');\n          this.$emit('upload', { ...data, name });\n        }).catch(() => {\n          this.error = 'An error has occurred!';\n        });\n    }, 'uploading')\n  }\n};\n","import pMinDelay from 'p-min-delay';\n\nexport default function loader(action, name, minDuration = 0) {\n  return function () {\n    this[name] = true;\n    return pMinDelay(Promise.resolve(action.call(this, ...arguments)), minDuration)\n      .finally(() => (this[name] = false));\n  };\n}\n","import Edit from '@/edit/index.vue';\nimport Toolbar from '@/edit/Toolbar.vue';\n\nexport { Edit, Toolbar };\n\nexport default {\n  initState: () => ({ launchUrl: null }),\n  components: { Edit }\n};\n"],"names":["inject","data","uploading","methods","createFileForm","e","form","FormData","file","target","files","append","name","this","uploadOptions","unpack","upload","action","minDuration","pMinDelay","Promise","resolve","call","arguments","_this","loader","$storageService","then","get","$emit","error","initState","launchUrl","components","Edit"],"mappings":"25LAEe,CACbA,OAAQ,CAAC,mBACTC,KAAM,iBAAO,CAAEC,WAAW,IAC1BC,QAAS,CACPC,wBAAeC,QACRC,KAAO,IAAIC,aACTC,IAAQH,EAAEI,OAAOC,YACnBF,SACAF,KAAKK,OAAO,OAAQH,EAAMA,EAAKI,OACjBC,KAAKC,eAAiB,IAAjCC,QACIF,KAAKP,KAAKK,OAAO,UAAU,KAEzCK,OCZW,SAAgBC,EAAQL,OAAMM,yDAAc,SAClD,kCACAN,IAAQ,EACNO,UAAUC,QAAQC,QAAQJ,EAAOK,WAAPL,GAAYJ,wCAASU,cAAaL,YACxD,kBAAOM,EAAKZ,IAAQ,MDQvBa,EAAO,SAAUpB,0BAClBD,eAAeC,GACbQ,KAAKa,gBAAgBV,OAAOH,KAAKP,MACrCqB,MAAK,SAAA1B,OACIW,EAASY,EAAKlB,KAAKsB,IAAI,QAAvBhB,KACRY,EAAKK,MAAM,0BAAe5B,GAAMW,KAAAA,eACzB,WACPY,EAAKM,MAAQ,8BAEhB,imDElBQ,CACbC,UAAW,iBAAO,CAAEC,UAAW,OAC/BC,WAAY,CAAEC,KAAAA"}