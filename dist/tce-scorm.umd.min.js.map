{"version":3,"file":"tce-scorm.umd.min.js","sources":["../src/tce-core/upload.js","../src/tce-core/loader.js","../src/index.js"],"sourcesContent":["import loader from './loader';\n\nexport default {\n  inject: ['$storageService'],\n  data: () => ({ uploading: false }),\n  methods: {\n    createFileForm(e) {\n      this.form = new FormData();\n      const [file] = e.target.files;\n      if (!file) return;\n      this.form.append('file', file, file.name);\n      this.form.append('unpack', true);\n    },\n    upload: loader(function (repositoryId, e) {\n      this.createFileForm(e);\n      return this.$storageService.upload(repositoryId, this.form)\n        .then(data => {\n          const { name } = this.form.get('file');\n          this.$emit('upload', { ...data, name });\n        }).catch(() => {\n          this.error = 'An error has occurred!';\n        });\n    }, 'uploading')\n  }\n};\n","import pMinDelay from 'p-min-delay';\n\nexport default function loader(action, name, minDuration = 0) {\n  return function () {\n    this[name] = true;\n    return pMinDelay(Promise.resolve(action.call(this, ...arguments)), minDuration)\n      .finally(() => (this[name] = false));\n  };\n}\n","import Edit from '@/edit/index.vue';\nimport Toolbar from '@/edit/Toolbar.vue';\n\nexport { Edit, Toolbar };\n\nexport default {\n  initState: () => ({ launchUrl: null }),\n  components: { Edit }\n};\n"],"names":["inject","data","uploading","methods","createFileForm","e","form","FormData","file","target","files","append","name","upload","action","minDuration","pMinDelay","Promise","resolve","call","this","arguments","_this","loader","repositoryId","$storageService","then","get","$emit","error","initState","launchUrl","components","Edit"],"mappings":"i9LAEe,CACbA,OAAQ,CAAC,mBACTC,KAAM,iBAAO,CAAEC,WAAW,IAC1BC,QAAS,CACPC,wBAAeC,QACRC,KAAO,IAAIC,aACTC,IAAQH,EAAEI,OAAOC,YACnBF,SACAF,KAAKK,OAAO,OAAQH,EAAMA,EAAKI,WAC/BN,KAAKK,OAAO,UAAU,KAE7BE,OCXW,SAAgBC,EAAQF,OAAMG,yDAAc,SAClD,kCACAH,IAAQ,EACNI,UAAUC,QAAQC,QAAQJ,EAAOK,WAAPL,GAAYM,wCAASC,cAAaN,YACxD,kBAAOO,EAAKV,IAAQ,MDOvBW,EAAO,SAAUC,EAAcnB,0BAChCD,eAAeC,GACbe,KAAKK,gBAAgBZ,OAAOW,EAAcJ,KAAKd,MACnDoB,MAAK,SAAAzB,OACIW,EAASU,EAAKhB,KAAKqB,IAAI,QAAvBf,KACRU,EAAKM,MAAM,0BAAe3B,GAAMW,KAAAA,eACzB,WACPU,EAAKO,MAAQ,8BAEhB,smDEjBQ,CACbC,UAAW,iBAAO,CAAEC,UAAW,OAC/BC,WAAY,CAAEC,KAAAA"}